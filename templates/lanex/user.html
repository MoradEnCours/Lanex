{% extends 'lanex/base.html' %}
{% load static %}

{% block title_block %}
    {% if user_profile %}
        {{ user_profile.user.username }}
    {% else %}
        Unknown User
    {% endif %}
{% endblock %}
{% block body_block %}
<div class="container text-center">
    <div class="jumbotron p-4">
        <div class="container">
        {% if user_profile %}
            <table class="tg">
              <tr>
                <th class="tg-yw4l">
                    <img class="profile" src="{{ user_profile.picture.url }}">
                </th>
                {% if user.is_authenticated %}
                    {% if user_profile.user.username == request.user.username %}
                        <a style="float:right;" class="action-button shadow animate blue" href="{% url 'lanex:user_settings' user_profile.user.username %}">Settings</a><br />
                    {% else %}
                        <a style="float:right;" class="action-button shadow animate blue" href ="mailto: {{ user_profile.user.email }}">Send mail to the user</a><br />
                    {% endif %}
                {% endif %}
                <th class="tg-yw41">
                    <h1 class="jumbotron-heading">{{ user_profile.user.first_name }} {{ user_profile.user.last_name }}</h1>
                    <h6>{{ user_profile.user.username }}</h6>
                </th>
              </tr>
            </table>  
        {% else %}
            The mentioned user does not seem to exist.
        {% endif %}
        </div>
    </div>
    <ul>
    {% if user_profile %}
    <section id="requests" class="bg">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 mx-auto">
                <h2>User's requests</h2>
                <ul class="nav flex-column">
                    {% if requests %}
                        {% for request in requests %}
                        <ul class="list">
                            <li class="list">
                            {% if request.picture %}
                            <img class="list" src="{{ request.picture.url }}" />
                            {% else %}
                            <img class="list" src="{{ request.language.picture.url }}" />
                            {% endif %}
                            <h3 class="list"><a href="{% url 'lanex:show_request' request.language.slug request.slug %}">
                            {{ request.title }}</a></h3>
                            <p class="list">{{ request.desc }}</p>
                            </li>
                        </ul>
                        {% endfor %}
                    {% else %}
                        <li class="nav-item">There are no requests present.</li>
                    {% endif %}
                </ul>
                </div>
            </div>
        </div>
    {% else %}
    User has made no requests.<br />
    {% endif %}
    </section>
    </ul>
</div>
{% endblock %}